4503e1af5eb2db160cd4f43751a796cd
'use strict';

var createStoreImpl = function createStoreImpl(createState) {
  var state;
  var listeners = new Set();
  var setState = function setState(partial, replace) {
    var nextState = typeof partial === "function" ? partial(state) : partial;
    if (!Object.is(nextState, state)) {
      var previousState = state;
      state = (replace != null ? replace : typeof nextState !== "object" || nextState === null) ? nextState : Object.assign({}, state, nextState);
      listeners.forEach(function (listener) {
        return listener(state, previousState);
      });
    }
  };
  var getState = function getState() {
    return state;
  };
  var getInitialState = function getInitialState() {
    return initialState;
  };
  var subscribe = function subscribe(listener) {
    listeners.add(listener);
    return function () {
      return listeners.delete(listener);
    };
  };
  var api = {
    setState: setState,
    getState: getState,
    getInitialState: getInitialState,
    subscribe: subscribe
  };
  var initialState = state = createState(setState, getState, api);
  return api;
};
var createStore = function createStore(createState) {
  return createState ? createStoreImpl(createState) : createStoreImpl;
};
exports.createStore = createStore;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcmVhdGVTdG9yZUltcGwiLCJjcmVhdGVTdGF0ZSIsInN0YXRlIiwibGlzdGVuZXJzIiwiU2V0Iiwic2V0U3RhdGUiLCJwYXJ0aWFsIiwicmVwbGFjZSIsIm5leHRTdGF0ZSIsIk9iamVjdCIsImlzIiwicHJldmlvdXNTdGF0ZSIsImFzc2lnbiIsImZvckVhY2giLCJsaXN0ZW5lciIsImdldFN0YXRlIiwiZ2V0SW5pdGlhbFN0YXRlIiwiaW5pdGlhbFN0YXRlIiwic3Vic2NyaWJlIiwiYWRkIiwiZGVsZXRlIiwiYXBpIiwiY3JlYXRlU3RvcmUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsidmFuaWxsYS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGNyZWF0ZVN0b3JlSW1wbCA9IChjcmVhdGVTdGF0ZSkgPT4ge1xuICBsZXQgc3RhdGU7XG4gIGNvbnN0IGxpc3RlbmVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIGNvbnN0IHNldFN0YXRlID0gKHBhcnRpYWwsIHJlcGxhY2UpID0+IHtcbiAgICBjb25zdCBuZXh0U3RhdGUgPSB0eXBlb2YgcGFydGlhbCA9PT0gXCJmdW5jdGlvblwiID8gcGFydGlhbChzdGF0ZSkgOiBwYXJ0aWFsO1xuICAgIGlmICghT2JqZWN0LmlzKG5leHRTdGF0ZSwgc3RhdGUpKSB7XG4gICAgICBjb25zdCBwcmV2aW91c1N0YXRlID0gc3RhdGU7XG4gICAgICBzdGF0ZSA9IChyZXBsYWNlICE9IG51bGwgPyByZXBsYWNlIDogdHlwZW9mIG5leHRTdGF0ZSAhPT0gXCJvYmplY3RcIiB8fCBuZXh0U3RhdGUgPT09IG51bGwpID8gbmV4dFN0YXRlIDogT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUsIG5leHRTdGF0ZSk7XG4gICAgICBsaXN0ZW5lcnMuZm9yRWFjaCgobGlzdGVuZXIpID0+IGxpc3RlbmVyKHN0YXRlLCBwcmV2aW91c1N0YXRlKSk7XG4gICAgfVxuICB9O1xuICBjb25zdCBnZXRTdGF0ZSA9ICgpID0+IHN0YXRlO1xuICBjb25zdCBnZXRJbml0aWFsU3RhdGUgPSAoKSA9PiBpbml0aWFsU3RhdGU7XG4gIGNvbnN0IHN1YnNjcmliZSA9IChsaXN0ZW5lcikgPT4ge1xuICAgIGxpc3RlbmVycy5hZGQobGlzdGVuZXIpO1xuICAgIHJldHVybiAoKSA9PiBsaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcbiAgfTtcbiAgY29uc3QgYXBpID0geyBzZXRTdGF0ZSwgZ2V0U3RhdGUsIGdldEluaXRpYWxTdGF0ZSwgc3Vic2NyaWJlIH07XG4gIGNvbnN0IGluaXRpYWxTdGF0ZSA9IHN0YXRlID0gY3JlYXRlU3RhdGUoc2V0U3RhdGUsIGdldFN0YXRlLCBhcGkpO1xuICByZXR1cm4gYXBpO1xufTtcbmNvbnN0IGNyZWF0ZVN0b3JlID0gKChjcmVhdGVTdGF0ZSkgPT4gY3JlYXRlU3RhdGUgPyBjcmVhdGVTdG9yZUltcGwoY3JlYXRlU3RhdGUpIDogY3JlYXRlU3RvcmVJbXBsKTtcblxuZXhwb3J0cy5jcmVhdGVTdG9yZSA9IGNyZWF0ZVN0b3JlO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaLElBQU1BLGVBQWUsR0FBRyxTQUFsQkEsZUFBZUEsQ0FBSUMsV0FBVyxFQUFLO0VBQ3ZDLElBQUlDLEtBQUs7RUFDVCxJQUFNQyxTQUFTLEdBQW1CLElBQUlDLEdBQUcsQ0FBQyxDQUFDO0VBQzNDLElBQU1DLFFBQVEsR0FBRyxTQUFYQSxRQUFRQSxDQUFJQyxPQUFPLEVBQUVDLE9BQU8sRUFBSztJQUNyQyxJQUFNQyxTQUFTLEdBQUcsT0FBT0YsT0FBTyxLQUFLLFVBQVUsR0FBR0EsT0FBTyxDQUFDSixLQUFLLENBQUMsR0FBR0ksT0FBTztJQUMxRSxJQUFJLENBQUNHLE1BQU0sQ0FBQ0MsRUFBRSxDQUFDRixTQUFTLEVBQUVOLEtBQUssQ0FBQyxFQUFFO01BQ2hDLElBQU1TLGFBQWEsR0FBR1QsS0FBSztNQUMzQkEsS0FBSyxHQUFHLENBQUNLLE9BQU8sSUFBSSxJQUFJLEdBQUdBLE9BQU8sR0FBRyxPQUFPQyxTQUFTLEtBQUssUUFBUSxJQUFJQSxTQUFTLEtBQUssSUFBSSxJQUFJQSxTQUFTLEdBQUdDLE1BQU0sQ0FBQ0csTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFVixLQUFLLEVBQUVNLFNBQVMsQ0FBQztNQUMzSUwsU0FBUyxDQUFDVSxPQUFPLENBQUMsVUFBQ0MsUUFBUTtRQUFBLE9BQUtBLFFBQVEsQ0FBQ1osS0FBSyxFQUFFUyxhQUFhLENBQUM7TUFBQSxFQUFDO0lBQ2pFO0VBQ0YsQ0FBQztFQUNELElBQU1JLFFBQVEsR0FBRyxTQUFYQSxRQUFRQSxDQUFBO0lBQUEsT0FBU2IsS0FBSztFQUFBO0VBQzVCLElBQU1jLGVBQWUsR0FBRyxTQUFsQkEsZUFBZUEsQ0FBQTtJQUFBLE9BQVNDLFlBQVk7RUFBQTtFQUMxQyxJQUFNQyxTQUFTLEdBQUcsU0FBWkEsU0FBU0EsQ0FBSUosUUFBUSxFQUFLO0lBQzlCWCxTQUFTLENBQUNnQixHQUFHLENBQUNMLFFBQVEsQ0FBQztJQUN2QixPQUFPO01BQUEsT0FBTVgsU0FBUyxDQUFDaUIsTUFBTSxDQUFDTixRQUFRLENBQUM7SUFBQTtFQUN6QyxDQUFDO0VBQ0QsSUFBTU8sR0FBRyxHQUFHO0lBQUVoQixRQUFRLEVBQVJBLFFBQVE7SUFBRVUsUUFBUSxFQUFSQSxRQUFRO0lBQUVDLGVBQWUsRUFBZkEsZUFBZTtJQUFFRSxTQUFTLEVBQVRBO0VBQVUsQ0FBQztFQUM5RCxJQUFNRCxZQUFZLEdBQUdmLEtBQUssR0FBR0QsV0FBVyxDQUFDSSxRQUFRLEVBQUVVLFFBQVEsRUFBRU0sR0FBRyxDQUFDO0VBQ2pFLE9BQU9BLEdBQUc7QUFDWixDQUFDO0FBQ0QsSUFBTUMsV0FBVyxHQUFJLFNBQWZBLFdBQVdBLENBQUtyQixXQUFXO0VBQUEsT0FBS0EsV0FBVyxHQUFHRCxlQUFlLENBQUNDLFdBQVcsQ0FBQyxHQUFHRCxlQUFlO0FBQUEsQ0FBQztBQUVuR3VCLE9BQU8sQ0FBQ0QsV0FBVyxHQUFHQSxXQUFXIiwiaWdub3JlTGlzdCI6W119