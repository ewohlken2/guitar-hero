{"version":3,"names":["_zustand","require","getComboMultiplier","combo","getPointsForHit","type","initialState","currentSong","currentLevel","score","maxCombo","hits","misses","isPlaying","useGameStore","exports","create","set","Object","assign","setSong","song","setLevel","level","startGame","endGame","addHit","state","newCombo","multiplier","points","Math","max","addMiss","reset"],"sources":["useGameStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { Song, HitType } from '../types';\n\ninterface GameState {\n  currentSong: Song | null;\n  currentLevel: number;\n  score: number;\n  combo: number;\n  maxCombo: number;\n  hits: number;\n  misses: number;\n  isPlaying: boolean;\n\n  // Actions\n  setSong: (song: Song) => void;\n  setLevel: (level: number) => void;\n  startGame: () => void;\n  endGame: () => void;\n  addHit: (type: HitType) => void;\n  addMiss: () => void;\n  reset: () => void;\n}\n\nconst getComboMultiplier = (combo: number): number => {\n  if (combo >= 50) return 4;\n  if (combo >= 20) return 3;\n  if (combo >= 10) return 2;\n  return 1;\n};\n\nconst getPointsForHit = (type: HitType): number => {\n  switch (type) {\n    case 'perfect':\n      return 100;\n    case 'good':\n      return 50;\n    default:\n      return 0;\n  }\n};\n\nconst initialState = {\n  currentSong: null,\n  currentLevel: 1,\n  score: 0,\n  combo: 0,\n  maxCombo: 0,\n  hits: 0,\n  misses: 0,\n  isPlaying: false,\n};\n\nexport const useGameStore = create<GameState>((set) => ({\n  ...initialState,\n\n  setSong: (song) => set({ currentSong: song }),\n\n  setLevel: (level) => set({ currentLevel: level }),\n\n  startGame: () => set({ isPlaying: true, score: 0, combo: 0, maxCombo: 0, hits: 0, misses: 0 }),\n\n  endGame: () => set({ isPlaying: false }),\n\n  addHit: (type) =>\n    set((state) => {\n      const newCombo = state.combo + 1;\n      const multiplier = getComboMultiplier(state.combo); // Use current combo for multiplier\n      const points = getPointsForHit(type) * multiplier;\n\n      return {\n        score: state.score + points,\n        combo: newCombo,\n        maxCombo: Math.max(state.maxCombo, newCombo),\n        hits: state.hits + 1,\n      };\n    }),\n\n  addMiss: () =>\n    set((state) => ({\n      combo: 0,\n      misses: state.misses + 1,\n    })),\n\n  reset: () => set(initialState),\n}));\n"],"mappings":";;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AAuBA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAIC,KAAa,EAAa;EACpD,IAAIA,KAAK,IAAI,EAAE,EAAE,OAAO,CAAC;EACzB,IAAIA,KAAK,IAAI,EAAE,EAAE,OAAO,CAAC;EACzB,IAAIA,KAAK,IAAI,EAAE,EAAE,OAAO,CAAC;EACzB,OAAO,CAAC;AACV,CAAC;AAED,IAAMC,eAAe,GAAG,SAAlBA,eAAeA,CAAIC,IAAa,EAAa;EACjD,QAAQA,IAAI;IACV,KAAK,SAAS;MACZ,OAAO,GAAG;IACZ,KAAK,MAAM;MACT,OAAO,EAAE;IACX;MACE,OAAO,CAAC;EACZ;AACF,CAAC;AAED,IAAMC,YAAY,GAAG;EACnBC,WAAW,EAAE,IAAI;EACjBC,YAAY,EAAE,CAAC;EACfC,KAAK,EAAE,CAAC;EACRN,KAAK,EAAE,CAAC;EACRO,QAAQ,EAAE,CAAC;EACXC,IAAI,EAAE,CAAC;EACPC,MAAM,EAAE,CAAC;EACTC,SAAS,EAAE;AACb,CAAC;AAEM,IAAMC,YAAY,GAAAC,OAAA,CAAAD,YAAA,GAAG,IAAAE,eAAM,EAAY,UAACC,GAAG;EAAA,OAAAC,MAAA,CAAAC,MAAA,KAC7Cb,YAAY;IAEfc,OAAO,EAAE,SAATA,OAAOA,CAAGC,IAAI;MAAA,OAAKJ,GAAG,CAAC;QAAEV,WAAW,EAAEc;MAAK,CAAC,CAAC;IAAA;IAE7CC,QAAQ,EAAE,SAAVA,QAAQA,CAAGC,KAAK;MAAA,OAAKN,GAAG,CAAC;QAAET,YAAY,EAAEe;MAAM,CAAC,CAAC;IAAA;IAEjDC,SAAS,EAAE,SAAXA,SAASA,CAAA;MAAA,OAAQP,GAAG,CAAC;QAAEJ,SAAS,EAAE,IAAI;QAAEJ,KAAK,EAAE,CAAC;QAAEN,KAAK,EAAE,CAAC;QAAEO,QAAQ,EAAE,CAAC;QAAEC,IAAI,EAAE,CAAC;QAAEC,MAAM,EAAE;MAAE,CAAC,CAAC;IAAA;IAE9Fa,OAAO,EAAE,SAATA,OAAOA,CAAA;MAAA,OAAQR,GAAG,CAAC;QAAEJ,SAAS,EAAE;MAAM,CAAC,CAAC;IAAA;IAExCa,MAAM,EAAE,SAARA,MAAMA,CAAGrB,IAAI;MAAA,OACXY,GAAG,CAAC,UAACU,KAAK,EAAK;QACb,IAAMC,QAAQ,GAAGD,KAAK,CAACxB,KAAK,GAAG,CAAC;QAChC,IAAM0B,UAAU,GAAG3B,kBAAkB,CAACyB,KAAK,CAACxB,KAAK,CAAC;QAClD,IAAM2B,MAAM,GAAG1B,eAAe,CAACC,IAAI,CAAC,GAAGwB,UAAU;QAEjD,OAAO;UACLpB,KAAK,EAAEkB,KAAK,CAAClB,KAAK,GAAGqB,MAAM;UAC3B3B,KAAK,EAAEyB,QAAQ;UACflB,QAAQ,EAAEqB,IAAI,CAACC,GAAG,CAACL,KAAK,CAACjB,QAAQ,EAAEkB,QAAQ,CAAC;UAC5CjB,IAAI,EAAEgB,KAAK,CAAChB,IAAI,GAAG;QACrB,CAAC;MACH,CAAC,CAAC;IAAA;IAEJsB,OAAO,EAAE,SAATA,OAAOA,CAAA;MAAA,OACLhB,GAAG,CAAC,UAACU,KAAK;QAAA,OAAM;UACdxB,KAAK,EAAE,CAAC;UACRS,MAAM,EAAEe,KAAK,CAACf,MAAM,GAAG;QACzB,CAAC;MAAA,CAAC,CAAC;IAAA;IAELsB,KAAK,EAAE,SAAPA,KAAKA,CAAA;MAAA,OAAQjB,GAAG,CAACX,YAAY,CAAC;IAAA;EAAA;AAAA,CAC9B,CAAC","ignoreList":[]}