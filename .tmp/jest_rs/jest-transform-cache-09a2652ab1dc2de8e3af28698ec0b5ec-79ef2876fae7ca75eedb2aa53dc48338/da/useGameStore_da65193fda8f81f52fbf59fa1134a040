8162f5cd619f0801e32d762a9e5bc5c2
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useGameStore = void 0;
var _zustand = require("zustand");
var getComboMultiplier = function getComboMultiplier(combo) {
  if (combo >= 50) return 4;
  if (combo >= 20) return 3;
  if (combo >= 10) return 2;
  return 1;
};
var getPointsForHit = function getPointsForHit(type) {
  switch (type) {
    case 'perfect':
      return 100;
    case 'good':
      return 50;
    default:
      return 0;
  }
};
var initialState = {
  currentSong: null,
  currentLevel: 1,
  score: 0,
  combo: 0,
  maxCombo: 0,
  hits: 0,
  misses: 0,
  isPlaying: false
};
var useGameStore = exports.useGameStore = (0, _zustand.create)(function (set) {
  return Object.assign({}, initialState, {
    setSong: function setSong(song) {
      return set({
        currentSong: song
      });
    },
    setLevel: function setLevel(level) {
      return set({
        currentLevel: level
      });
    },
    startGame: function startGame() {
      return set({
        isPlaying: true,
        score: 0,
        combo: 0,
        maxCombo: 0,
        hits: 0,
        misses: 0
      });
    },
    endGame: function endGame() {
      return set({
        isPlaying: false
      });
    },
    addHit: function addHit(type) {
      return set(function (state) {
        var newCombo = state.combo + 1;
        var multiplier = getComboMultiplier(state.combo);
        var points = getPointsForHit(type) * multiplier;
        return {
          score: state.score + points,
          combo: newCombo,
          maxCombo: Math.max(state.maxCombo, newCombo),
          hits: state.hits + 1
        };
      });
    },
    addMiss: function addMiss() {
      return set(function (state) {
        return {
          combo: 0,
          misses: state.misses + 1
        };
      });
    },
    reset: function reset() {
      return set(initialState);
    }
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfenVzdGFuZCIsInJlcXVpcmUiLCJnZXRDb21ib011bHRpcGxpZXIiLCJjb21ibyIsImdldFBvaW50c0ZvckhpdCIsInR5cGUiLCJpbml0aWFsU3RhdGUiLCJjdXJyZW50U29uZyIsImN1cnJlbnRMZXZlbCIsInNjb3JlIiwibWF4Q29tYm8iLCJoaXRzIiwibWlzc2VzIiwiaXNQbGF5aW5nIiwidXNlR2FtZVN0b3JlIiwiZXhwb3J0cyIsImNyZWF0ZSIsInNldCIsIk9iamVjdCIsImFzc2lnbiIsInNldFNvbmciLCJzb25nIiwic2V0TGV2ZWwiLCJsZXZlbCIsInN0YXJ0R2FtZSIsImVuZEdhbWUiLCJhZGRIaXQiLCJzdGF0ZSIsIm5ld0NvbWJvIiwibXVsdGlwbGllciIsInBvaW50cyIsIk1hdGgiLCJtYXgiLCJhZGRNaXNzIiwicmVzZXQiXSwic291cmNlcyI6WyJ1c2VHYW1lU3RvcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSAnenVzdGFuZCc7XG5pbXBvcnQgeyBTb25nLCBIaXRUeXBlIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbnRlcmZhY2UgR2FtZVN0YXRlIHtcbiAgY3VycmVudFNvbmc6IFNvbmcgfCBudWxsO1xuICBjdXJyZW50TGV2ZWw6IG51bWJlcjtcbiAgc2NvcmU6IG51bWJlcjtcbiAgY29tYm86IG51bWJlcjtcbiAgbWF4Q29tYm86IG51bWJlcjtcbiAgaGl0czogbnVtYmVyO1xuICBtaXNzZXM6IG51bWJlcjtcbiAgaXNQbGF5aW5nOiBib29sZWFuO1xuXG4gIC8vIEFjdGlvbnNcbiAgc2V0U29uZzogKHNvbmc6IFNvbmcpID0+IHZvaWQ7XG4gIHNldExldmVsOiAobGV2ZWw6IG51bWJlcikgPT4gdm9pZDtcbiAgc3RhcnRHYW1lOiAoKSA9PiB2b2lkO1xuICBlbmRHYW1lOiAoKSA9PiB2b2lkO1xuICBhZGRIaXQ6ICh0eXBlOiBIaXRUeXBlKSA9PiB2b2lkO1xuICBhZGRNaXNzOiAoKSA9PiB2b2lkO1xuICByZXNldDogKCkgPT4gdm9pZDtcbn1cblxuY29uc3QgZ2V0Q29tYm9NdWx0aXBsaWVyID0gKGNvbWJvOiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICBpZiAoY29tYm8gPj0gNTApIHJldHVybiA0O1xuICBpZiAoY29tYm8gPj0gMjApIHJldHVybiAzO1xuICBpZiAoY29tYm8gPj0gMTApIHJldHVybiAyO1xuICByZXR1cm4gMTtcbn07XG5cbmNvbnN0IGdldFBvaW50c0ZvckhpdCA9ICh0eXBlOiBIaXRUeXBlKTogbnVtYmVyID0+IHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAncGVyZmVjdCc6XG4gICAgICByZXR1cm4gMTAwO1xuICAgIGNhc2UgJ2dvb2QnOlxuICAgICAgcmV0dXJuIDUwO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gMDtcbiAgfVxufTtcblxuY29uc3QgaW5pdGlhbFN0YXRlID0ge1xuICBjdXJyZW50U29uZzogbnVsbCxcbiAgY3VycmVudExldmVsOiAxLFxuICBzY29yZTogMCxcbiAgY29tYm86IDAsXG4gIG1heENvbWJvOiAwLFxuICBoaXRzOiAwLFxuICBtaXNzZXM6IDAsXG4gIGlzUGxheWluZzogZmFsc2UsXG59O1xuXG5leHBvcnQgY29uc3QgdXNlR2FtZVN0b3JlID0gY3JlYXRlPEdhbWVTdGF0ZT4oKHNldCkgPT4gKHtcbiAgLi4uaW5pdGlhbFN0YXRlLFxuXG4gIHNldFNvbmc6IChzb25nKSA9PiBzZXQoeyBjdXJyZW50U29uZzogc29uZyB9KSxcblxuICBzZXRMZXZlbDogKGxldmVsKSA9PiBzZXQoeyBjdXJyZW50TGV2ZWw6IGxldmVsIH0pLFxuXG4gIHN0YXJ0R2FtZTogKCkgPT4gc2V0KHsgaXNQbGF5aW5nOiB0cnVlLCBzY29yZTogMCwgY29tYm86IDAsIG1heENvbWJvOiAwLCBoaXRzOiAwLCBtaXNzZXM6IDAgfSksXG5cbiAgZW5kR2FtZTogKCkgPT4gc2V0KHsgaXNQbGF5aW5nOiBmYWxzZSB9KSxcblxuICBhZGRIaXQ6ICh0eXBlKSA9PlxuICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgIGNvbnN0IG5ld0NvbWJvID0gc3RhdGUuY29tYm8gKyAxO1xuICAgICAgY29uc3QgbXVsdGlwbGllciA9IGdldENvbWJvTXVsdGlwbGllcihzdGF0ZS5jb21ibyk7IC8vIFVzZSBjdXJyZW50IGNvbWJvIGZvciBtdWx0aXBsaWVyXG4gICAgICBjb25zdCBwb2ludHMgPSBnZXRQb2ludHNGb3JIaXQodHlwZSkgKiBtdWx0aXBsaWVyO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzY29yZTogc3RhdGUuc2NvcmUgKyBwb2ludHMsXG4gICAgICAgIGNvbWJvOiBuZXdDb21ibyxcbiAgICAgICAgbWF4Q29tYm86IE1hdGgubWF4KHN0YXRlLm1heENvbWJvLCBuZXdDb21ibyksXG4gICAgICAgIGhpdHM6IHN0YXRlLmhpdHMgKyAxLFxuICAgICAgfTtcbiAgICB9KSxcblxuICBhZGRNaXNzOiAoKSA9PlxuICAgIHNldCgoc3RhdGUpID0+ICh7XG4gICAgICBjb21ibzogMCxcbiAgICAgIG1pc3Nlczogc3RhdGUubWlzc2VzICsgMSxcbiAgICB9KSksXG5cbiAgcmVzZXQ6ICgpID0+IHNldChpbml0aWFsU3RhdGUpLFxufSkpO1xuIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsSUFBQUEsUUFBQSxHQUFBQyxPQUFBO0FBdUJBLElBQU1DLGtCQUFrQixHQUFHLFNBQXJCQSxrQkFBa0JBLENBQUlDLEtBQWEsRUFBYTtFQUNwRCxJQUFJQSxLQUFLLElBQUksRUFBRSxFQUFFLE9BQU8sQ0FBQztFQUN6QixJQUFJQSxLQUFLLElBQUksRUFBRSxFQUFFLE9BQU8sQ0FBQztFQUN6QixJQUFJQSxLQUFLLElBQUksRUFBRSxFQUFFLE9BQU8sQ0FBQztFQUN6QixPQUFPLENBQUM7QUFDVixDQUFDO0FBRUQsSUFBTUMsZUFBZSxHQUFHLFNBQWxCQSxlQUFlQSxDQUFJQyxJQUFhLEVBQWE7RUFDakQsUUFBUUEsSUFBSTtJQUNWLEtBQUssU0FBUztNQUNaLE9B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