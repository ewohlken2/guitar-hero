3cd17e38a9047b2cf3287c2db666b354
var _useGameStore = require("../../src/stores/useGameStore");
describe('useGameStore', function () {
  beforeEach(function () {
    _useGameStore.useGameStore.getState().reset();
  });
  it('should start with initial state', function () {
    var state = _useGameStore.useGameStore.getState();
    expect(state.score).toBe(0);
    expect(state.combo).toBe(0);
    expect(state.isPlaying).toBe(false);
  });
  it('should add score with combo multiplier', function () {
    var _useGameStore$getStat = _useGameStore.useGameStore.getState(),
      addHit = _useGameStore$getStat.addHit;
    addHit('perfect');
    expect(_useGameStore.useGameStore.getState().score).toBe(100);
    expect(_useGameStore.useGameStore.getState().combo).toBe(1);
    for (var i = 0; i < 9; i++) {
      addHit('perfect');
    }
    expect(_useGameStore.useGameStore.getState().combo).toBe(10);
    addHit('perfect');
    expect(_useGameStore.useGameStore.getState().score).toBe(1000 + 200);
  });
  it('should reset combo on miss', function () {
    var _useGameStore$getStat2 = _useGameStore.useGameStore.getState(),
      addHit = _useGameStore$getStat2.addHit,
      addMiss = _useGameStore$getStat2.addMiss;
    addHit('perfect');
    addHit('perfect');
    expect(_useGameStore.useGameStore.getState().combo).toBe(2);
    addMiss();
    expect(_useGameStore.useGameStore.getState().combo).toBe(0);
    expect(_useGameStore.useGameStore.getState().misses).toBe(1);
  });
  it('should track max combo', function () {
    var _useGameStore$getStat3 = _useGameStore.useGameStore.getState(),
      addHit = _useGameStore$getStat3.addHit,
      addMiss = _useGameStore$getStat3.addMiss;
    for (var i = 0; i < 5; i++) {
      addHit('perfect');
    }
    expect(_useGameStore.useGameStore.getState().maxCombo).toBe(5);
    addMiss();
    addHit('perfect');
    addHit('perfect');
    expect(_useGameStore.useGameStore.getState().maxCombo).toBe(5);
    expect(_useGameStore.useGameStore.getState().combo).toBe(2);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdXNlR2FtZVN0b3JlIiwicmVxdWlyZSIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsInVzZUdhbWVTdG9yZSIsImdldFN0YXRlIiwicmVzZXQiLCJpdCIsInN0YXRlIiwiZXhwZWN0Iiwic2NvcmUiLCJ0b0JlIiwiY29tYm8iLCJpc1BsYXlpbmciLCJfdXNlR2FtZVN0b3JlJGdldFN0YXQiLCJhZGRIaXQiLCJpIiwiX3VzZUdhbWVTdG9yZSRnZXRTdGF0MiIsImFkZE1pc3MiLCJtaXNzZXMiLCJfdXNlR2FtZVN0b3JlJGdldFN0YXQzIiwibWF4Q29tYm8iXSwic291cmNlcyI6WyJ1c2VHYW1lU3RvcmUudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VHYW1lU3RvcmUgfSBmcm9tICcuLi8uLi9zcmMvc3RvcmVzL3VzZUdhbWVTdG9yZSc7XG5cbmRlc2NyaWJlKCd1c2VHYW1lU3RvcmUnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHVzZUdhbWVTdG9yZS5nZXRTdGF0ZSgpLnJlc2V0KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgc3RhcnQgd2l0aCBpbml0aWFsIHN0YXRlJywgKCkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gdXNlR2FtZVN0b3JlLmdldFN0YXRlKCk7XG4gICAgZXhwZWN0KHN0YXRlLnNjb3JlKS50b0JlKDApO1xuICAgIGV4cGVjdChzdGF0ZS5jb21ibykudG9CZSgwKTtcbiAgICBleHBlY3Qoc3RhdGUuaXNQbGF5aW5nKS50b0JlKGZhbHNlKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBhZGQgc2NvcmUgd2l0aCBjb21ibyBtdWx0aXBsaWVyJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgYWRkSGl0IH0gPSB1c2VHYW1lU3RvcmUuZ2V0U3RhdGUoKTtcblxuICAgIC8vIEZpcnN0IGhpdDogMXggbXVsdGlwbGllclxuICAgIGFkZEhpdCgncGVyZmVjdCcpO1xuICAgIGV4cGVjdCh1c2VHYW1lU3RvcmUuZ2V0U3RhdGUoKS5zY29yZSkudG9CZSgxMDApO1xuICAgIGV4cGVjdCh1c2VHYW1lU3RvcmUuZ2V0U3RhdGUoKS5jb21ibykudG9CZSgxKTtcblxuICAgIC8vIE1vcmUgaGl0cyB0byBidWlsZCBjb21ib1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgOTsgaSsrKSB7XG4gICAgICBhZGRIaXQoJ3BlcmZlY3QnKTtcbiAgICB9XG4gICAgLy8gMTB0aCBoaXQ6IG5vdyBhdCAyeCBtdWx0aXBsaWVyXG4gICAgZXhwZWN0KHVzZUdhbWVTdG9yZS5nZXRTdGF0ZSgpLmNvbWJvKS50b0JlKDEwKTtcblxuICAgIGFkZEhpdCgncGVyZmVjdCcpO1xuICAgIC8vIDExdGggaGl0IHdpdGggMng6IDEwMCAqIDIgPSAyMDAgYWRkZWRcbiAgICBleHBlY3QodXNlR2FtZVN0b3JlLmdldFN0YXRlKCkuc2NvcmUpLnRvQmUoMTAwMCArIDIwMCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVzZXQgY29tYm8gb24gbWlzcycsICgpID0+IHtcbiAgICBjb25zdCB7IGFkZEhpdCwgYWRkTWlzcyB9ID0gdXNlR2FtZVN0b3JlLmdldFN0YXRlKCk7XG5cbiAgICBhZGRIaXQoJ3BlcmZlY3QnKTtcbiAgICBhZGRIaXQoJ3BlcmZlY3QnKTtcbiAgICBleHBlY3QodXNlR2FtZVN0b3JlLmdldFN0YXRlKCkuY29tYm8pLnRvQmUoMik7XG5cbiAgICBhZGRNaXNzKCk7XG4gICAgZXhwZWN0KHVzZUdhbWVTdG9yZS5nZXRTdGF0ZSgpLmNvbWJvKS50b0JlKDApO1xuICAgIGV4cGVjdCh1c2VHYW1lU3RvcmUuZ2V0U3RhdGUoKS5taXNzZXMpLnRvQmUoMSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgdHJhY2sgbWF4IGNvbWJvJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgYWRkSGl0LCBhZGRNaXNzIH0gPSB1c2VHYW1lU3RvcmUuZ2V0U3RhdGUoKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICBhZGRIaXQoJ3BlcmZlY3QnKTtcbiAgICB9XG4gICAgZXhwZWN0KHVzZUdhbWVTdG9yZS5nZXRTdGF0ZSgpLm1heENvbWJvKS50b0JlKDUpO1xuXG4gICAgYWRkTWlzcygpO1xuICAgIGFkZEhpdCgncGVyZmVjdCcpO1xuICAgIGFkZEhpdCgncGVyZmVjdCcpO1xuXG4gICAgLy8gTWF4IGNvbWJvIHNob3VsZCBzdGlsbCBiZSA1XG4gICAgZXhwZWN0KHVzZUdhbWVTdG9yZS5nZXRTdGF0ZSgpLm1heENvbWJvKS50b0JlKDUpO1xuICAgIGV4cGVjdCh1c2VHYW1lU3RvcmUuZ2V0U3RhdGUoKS5jb21ibykudG9CZSgyKTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQUEsYUFBQSxHQUFBQyxPQUFBO0FBRUFDLFFBQVEsQ0FBQyxjQUFjLEVBQUUsWUFBTTtFQUM3QkMsVUFBVSxDQUFDLFlBQU07SUFDZkMsMEJBQVksQ0FBQ0MsUUFBUSxDQUFDLENBQUMsQ0FBQ0MsS0FBSyxDQUFDLENBQUM7RUFDakMsQ0FBQyxDQUFDO0VBRUZDLEVBQUUsQ0FBQyxpQ0FBaUMsRUFBRSxZQUFNO0lBQzFDLElBQU1DLEtBQUssR0FBR0osMEJBQVksQ0FBQ0MsUUFBUSxDQUFDLENBQUM7SUFDckNJLE1BQU0sQ0FBQ0QsS0FBSyxDQUFDRSxLQUFLLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUMzQkYsTUFBTSxDQUFDRCxLQUFLLENBQUNJLEtBQUssQ0FBQyxDQUFDRCxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQzNCRixNQUFNLENBQUNELEtBQUssQ0FBQ0ssU0FBUyxDQUFDLENBQUNGLElBQUksQ0FBQyxLQUFLLENBQUM7RUFDckMsQ0FBQyxDQUFDO0VBRUZKLEVBQUUsQ0FBQyx3Q0FBd0MsRUFBRSxZQUFNO0lBQ2pELElBQUFPLHFCQUFBLEdBQW1CViwwQkFBWSxDQUFDQyxRQUFRLENBQUMsQ0FBQztNQUFsQ1UsTUFBTSxHQUFBRCxxQkFBQSxDQUFOQyxNQUFNO0lBR2RBLE1BQU0sQ0FBQyxT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